/*! For license information please see 5-block-TextEditor-index-stories.248c8882.iframe.bundle.js.LICENSE.txt */
(self.webpackChunkp4_ui=self.webpackChunkp4_ui||[]).push([[1209],{"./src/5-block/TextEditor/index.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Primary:()=>Primary,__namedExportsOrder:()=>__namedExportsOrder,default:()=>index_stories});var react=__webpack_require__("./node_modules/react/index.js"),react_namespaceObject=__webpack_require__.t(react,2),loadCss=__webpack_require__("./node_modules/thingies/lib/loadCss.js"),until=__webpack_require__("./node_modules/thingies/es6/until.js");const load=__webpack_require__("./node_modules/load-script/index.js"),loadScript=url=>new Promise(((resolve,reject)=>load(url,((err,script)=>err?reject(err):resolve(script)))));let cm;const loadCodeMirror=async()=>{return cm||((0,loadCss.Y)("https://cdn.jsdelivr.net/npm/codemirror@5.49.2/lib/codemirror.min.css"),(0,loadCss.Y)("https://cdn.jsdelivr.net/codemirror.spell-checker/latest/spell-checker.min.css"),cm=await(globalVarName="CodeMirror",url="https://cdn.jsdelivr.net/npm/codemirror@5.49.2/lib/codemirror.min.js",loadScript(url).then((()=>(0,until.C)((()=>!!__webpack_require__.g[globalVarName])))).then((()=>__webpack_require__.g[globalVarName]))),function addPlaceholderPlugin(CodeMirror){function clearPlaceholder(cm){cm.state.placeholder&&(cm.state.placeholder.parentNode.removeChild(cm.state.placeholder),cm.state.placeholder=null)}function setPlaceholder(cm){clearPlaceholder(cm);const elt=cm.state.placeholder=document.createElement("pre");elt.style.cssText="height: 0; overflow: visible",elt.style.direction=cm.getOption("direction"),elt.className="CodeMirror-placeholder CodeMirror-line-like";let placeHolder=cm.getOption("placeholder");"string"==typeof placeHolder&&(placeHolder=document.createTextNode(placeHolder)),elt.appendChild(placeHolder),cm.display.lineSpace.insertBefore(elt,cm.display.lineSpace.firstChild)}function onBlur(cm){isEmpty(cm)&&setPlaceholder(cm)}function onChange(cm){const wrapper=cm.getWrapperElement(),empty=isEmpty(cm);wrapper.className=wrapper.className.replace(" CodeMirror-empty","")+(empty?" CodeMirror-empty":""),empty?setPlaceholder(cm):clearPlaceholder(cm)}function isEmpty(cm){return 1===cm.lineCount()&&""===cm.getLine(0)}CodeMirror.defineOption("placeholder","",((cm,val,old)=>{const prev=old&&old!==CodeMirror.Init;if(val&&!prev)cm.on("blur",onBlur),cm.on("change",onChange),cm.on("swapDoc",onChange),onChange(cm);else if(!val&&prev){cm.off("blur",onBlur),cm.off("change",onChange),cm.off("swapDoc",onChange),clearPlaceholder(cm);const wrapper=cm.getWrapperElement();wrapper.className=wrapper.className.replace(" CodeMirror-empty","")}val&&!cm.hasFocus()&&onBlur(cm)}))}(cm),await Promise.all([loadScript("https://cdn.jsdelivr.net/npm/codemirror@5.49.2/addon/mode/overlay.min.js")]),await loadScript("https://cdn.jsdelivr.net/codemirror.spell-checker/latest/spell-checker.min.js"),cm);var globalVarName,url};var useAsync=__webpack_require__("./node_modules/react-use/lib/useAsync.js"),lib=__webpack_require__("./node_modules/nano-theme/lib/index.js"),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");const{useEffect,useRef,useState,useMemo}=react_namespaceObject,blockClass=(0,lib.rule)({"& .CodeMirror":{...lib.theme.font.mono,bgc:"transparent"},"& .CodeMirror-gutters":{bgc:"transparent",bdr:0},"& .CodeMirror-linenumber":{pad:"1px 4px 0 4px",col:"#ccc",fz:".7em"},"& .CodeMirror-placeholder":{op:.8},"& .CodeMirror .cm-spell-error":{bgc:"transparent !important",bdb:`1px solid ${lib.theme.color.sem.negative[0]}`},"& .CodeMirror .cm-comment":{col:"#f30"},"& .CodeMirror .cm-link":{col:lib.COLOR.LINK},"& .CodeMirror .cm-url":{col:lib.COLOR.LINK}}),textareaClass=(0,lib.rule)({vis:"hidden",w:"1px",h:"1px"}),setEditorLines=(editor,lineHeight,lines)=>{const height=10+lines*lineHeight+"px";editor.setSize("100%",height)},adjustLineNumber=function(editor,lineHeight){let minLines=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;const lines=Math.max(editor.getDoc().lineCount(),minLines);setEditorLines(editor,lineHeight,lines)},TextEditor=props=>{const dynamicClass=(0,lib.useRule)((theme=>({"& .CodeMirror":{col:"dark"===theme.name?"#ddd":"000"},"& .CodeMirror-selected":{bg:`${theme.isLight?theme.g(.9):theme.g(.8)} !important`},"& .CodeMirror-cursor":{borderLeftColor:theme.g(0,.5)}}))),fontSize=props.fontSize||15,lineHeightInPx=Math.round(fontSize*(props.lineHeight||1.5)),{className,minLines=1,onFocus,onBlur,disabled}=props,textareaRef=useRef(null),[editor,setEditor]=useState(null),{value:CodeMirror}=(0,useAsync.Z)(loadCodeMirror),controls=useMemo((()=>{if(!editor)return;return{getValue:()=>editor.getDoc().getValue(),getSelectionValue:()=>editor.getDoc().getSelection().toString(),setValue:value=>editor.getDoc().setValue(value),insert:(text,select)=>{editor.getDoc().replaceSelection(text,select)},clear:()=>editor.getDoc().setValue(""),focus:()=>editor.focus(),blur:()=>editor.getInputField().blur(),gotoEnd:()=>editor.getDoc().setCursor(editor.getDoc().lineCount(),0),hasFocus:()=>editor.hasFocus(),selectAll:()=>{editor.execCommand("selectAll")}}}),[editor]);useEffect((()=>{if(!CodeMirror)return;if(!textareaRef.current)return;"function"==typeof CodeMirrorSpellChecker&&CodeMirrorSpellChecker({codeMirrorInstance:CodeMirror});const editor=CodeMirror.fromTextArea(textareaRef.current,{mode:"spell-checker",theme:"default",inputStyle:"textarea",placeholder:props.placeholder,lineNumbers:!1,lineWrapping:!0});props.showAllLines?setEditorLines(editor,lineHeightInPx,minLines):editor.setSize("100%","100%"),setEditor(editor)}),[textareaRef.current,CodeMirror]),useEffect((()=>{if(!editor)return;if(!props.showAllLines)return;const onChange=()=>{adjustLineNumber(editor,lineHeightInPx,minLines)};return adjustLineNumber(editor,lineHeightInPx,minLines),editor.on("change",onChange),()=>editor.off("change",onChange)}),[editor,props.showAllLines]),useEffect((()=>{if(!editor)return;if(!controls)return;if(!props.onChange)return;const listener=()=>props.onChange&&props.onChange(controls);return editor.on("change",listener),()=>editor.off("change",listener)}),[editor,controls,props.onChange]),useEffect((()=>{controls&&props.onControls&&props.onControls(controls)}),[controls]),useEffect((()=>{if(editor&&onFocus)return editor.on("focus",onFocus),()=>editor.off("focus",onFocus)}),[editor,onFocus]),useEffect((()=>{if(editor&&onBlur)return editor.on("blur",onBlur),()=>editor.off("blur",onBlur)}),[editor,onBlur]),useEffect((()=>{editor&&(disabled?editor.setOption("readOnly",!0):editor.setOption("readOnly",!1))}),[editor,disabled]);const style={fontSize:fontSize+"px",lineHeight:lineHeightInPx+"px"};return(0,jsx_runtime.jsx)("div",{className:(className||"")+blockClass+dynamicClass,style,children:(0,jsx_runtime.jsx)("textarea",{className:textareaClass,ref:textareaRef})})};TextEditor.displayName="TextEditor";try{TextEditor.displayName="TextEditor",TextEditor.__docgenInfo={description:"",displayName:"TextEditor",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},fontSize:{defaultValue:null,description:"",name:"fontSize",required:!1,type:{name:"number"}},placeholder:{defaultValue:null,description:"",name:"placeholder",required:!1,type:{name:"string"}},lineHeight:{defaultValue:null,description:"",name:"lineHeight",required:!1,type:{name:"number"}},showAllLines:{defaultValue:null,description:"",name:"showAllLines",required:!1,type:{name:"boolean"}},minLines:{defaultValue:null,description:"",name:"minLines",required:!1,type:{name:"number"}},disabled:{defaultValue:null,description:"",name:"disabled",required:!1,type:{name:"boolean"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!1,type:{name:"((controls: EditorControls) => void)"}},onControls:{defaultValue:null,description:"",name:"onControls",required:!1,type:{name:"((controls: EditorControls) => void)"}},onFocus:{defaultValue:null,description:"",name:"onFocus",required:!1,type:{name:"(() => void)"}},onBlur:{defaultValue:null,description:"",name:"onBlur",required:!1,type:{name:"(() => void)"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/5-block/TextEditor/index.tsx#TextEditor"]={docgenInfo:TextEditor.__docgenInfo,name:"TextEditor",path:"src/5-block/TextEditor/index.tsx#TextEditor"})}catch(__react_docgen_typescript_loader_error){}const index_stories={title:"5. Block/TextEditor",component:TextEditor,tags:["autodocs"],argTypes:{}},Primary={args:{}};Primary.parameters={...Primary.parameters,docs:{...Primary.parameters?.docs,source:{originalSource:"{\n  args: {}\n}",...Primary.parameters?.docs?.source}}};const __namedExportsOrder=["Primary"]},"./node_modules/load-script/index.js":module=>{function stdOnEnd(script,cb){script.onload=function(){this.onerror=this.onload=null,cb(null,script)},script.onerror=function(){this.onerror=this.onload=null,cb(new Error("Failed to load "+this.src),script)}}function ieOnEnd(script,cb){script.onreadystatechange=function(){"complete"!=this.readyState&&"loaded"!=this.readyState||(this.onreadystatechange=null,cb(null,script))}}module.exports=function load(src,opts,cb){var head=document.head||document.getElementsByTagName("head")[0],script=document.createElement("script");"function"==typeof opts&&(cb=opts,opts={}),opts=opts||{},cb=cb||function(){},script.type=opts.type||"text/javascript",script.charset=opts.charset||"utf8",script.async=!("async"in opts)||!!opts.async,script.src=src,opts.attrs&&function setAttributes(script,attrs){for(var attr in attrs)script.setAttribute(attr,attrs[attr])}(script,opts.attrs),opts.text&&(script.text=""+opts.text),("onload"in script?stdOnEnd:ieOnEnd)(script,cb),script.onload||stdOnEnd(script,cb),head.appendChild(script)}},"./node_modules/nano-theme/lib/breakpoints.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.m4=exports.m3=exports.m2=exports.m1=exports.b4=exports.b3=exports.b2=exports.b1=void 0,exports.b1=520,exports.b2=960,exports.b3=1300,exports.b4=1800,exports.m1=`@media (max-width:${exports.b1}px)`,exports.m2=`@media (max-width:${exports.b2}px)`,exports.m3=`@media (max-width:${exports.b3}px)`,exports.m4=`@media (max-width:${exports.b4}px)`},"./node_modules/nano-theme/lib/constants.js":(__unused_webpack_module,exports)=>{"use strict";var SIZE,ZINDEX,SYMBOL,COLOR;Object.defineProperty(exports,"__esModule",{value:!0}),exports.COLOR=exports.SYMBOL=exports.ZINDEX=exports.SIZE=void 0,function(SIZE){SIZE[SIZE.SITE_WIDTH=1300]="SITE_WIDTH",SIZE[SIZE.SITE_PADDING=32]="SITE_PADDING",SIZE[SIZE.PAGE_WIDTH=1e3]="PAGE_WIDTH",SIZE[SIZE.TOP_NAV_HEIGHT=64]="TOP_NAV_HEIGHT",SIZE[SIZE.SIDEBAR_WIDTH=300]="SIDEBAR_WIDTH"}(SIZE||(exports.SIZE=SIZE={})),function(ZINDEX){ZINDEX[ZINDEX.TOP_NAV=1e3]="TOP_NAV",ZINDEX[ZINDEX.SIDEBAR=1001]="SIDEBAR",ZINDEX[ZINDEX.CONTEXT=1002]="CONTEXT",ZINDEX[ZINDEX.PROGRESS=2e3]="PROGRESS",ZINDEX[ZINDEX.MODAL=4e3]="MODAL",ZINDEX[ZINDEX.CURSOR=1e6]="CURSOR"}(ZINDEX||(exports.ZINDEX=ZINDEX={})),function(SYMBOL){SYMBOL.CHECKMARK="✓",SYMBOL.CROSS="✗",SYMBOL.NIL="∅",SYMBOL.ELLIPSIS="…",SYMBOL.MDASH="—",SYMBOL.NDASH="–",SYMBOL.FDASH="‒",SYMBOL.CTRL="⌃",SYMBOL.CMD="⌘",SYMBOL.ALT="⌥",SYMBOL.SHIFT="⇧"}(SYMBOL||(exports.SYMBOL=SYMBOL={})),function(COLOR){COLOR.LINK="#0089ff"}(COLOR||(exports.COLOR=COLOR={}))},"./node_modules/nano-theme/lib/index.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const tslib_1=__webpack_require__("./node_modules/tslib/tslib.es6.mjs");tslib_1.__exportStar(__webpack_require__("./node_modules/nano-theme/lib/types.js"),exports),tslib_1.__exportStar(__webpack_require__("./node_modules/nano-theme/lib/constants.js"),exports),tslib_1.__exportStar(__webpack_require__("./node_modules/nano-theme/lib/css.js"),exports),tslib_1.__exportStar(__webpack_require__("./node_modules/nano-theme/lib/breakpoints.js"),exports),tslib_1.__exportStar(__webpack_require__("./node_modules/nano-theme/lib/font.js"),exports),tslib_1.__exportStar(__webpack_require__("./node_modules/nano-theme/lib/themes/light.js"),exports),tslib_1.__exportStar(__webpack_require__("./node_modules/nano-theme/lib/themes/dark.js"),exports),tslib_1.__exportStar(__webpack_require__("./node_modules/nano-theme/lib/react.js"),exports),tslib_1.__exportStar(__webpack_require__("./node_modules/nano-theme/lib/color.js"),exports)},"./node_modules/nano-theme/lib/react.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.GlobalCss=exports.makeRule=exports.useRule=exports.useTheme=exports.Provider=void 0;const React=__webpack_require__("./node_modules/react/index.js"),light_1=__webpack_require__("./node_modules/nano-theme/lib/themes/light.js"),dark_1=__webpack_require__("./node_modules/nano-theme/lib/themes/dark.js"),css_1=__webpack_require__("./node_modules/nano-theme/lib/css.js"),context=React.createContext(light_1.lightTheme);exports.Provider=React.memo((({theme,children})=>{const value="light"===theme?light_1.lightTheme:dark_1.darkTheme;return React.createElement(context.Provider,{value},children)}));exports.useTheme=()=>React.useContext(context);exports.useRule=fn=>{const css=fn((0,exports.useTheme)());return css_1.nano.cache(css)};exports.makeRule=fn=>()=>(0,exports.useRule)(fn);const useIsomorphicLayoutEffect_1=__webpack_require__("./node_modules/react-use/lib/useIsomorphicLayoutEffect.js");exports.GlobalCss=()=>{const theme=(0,exports.useTheme)();return(0,useIsomorphicLayoutEffect_1.default)((()=>{document.body.style.background=theme.bg,document.body.style.color=theme.g(.05,.85)}),[theme]),null}},"./node_modules/nano-theme/lib/themes/dark.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.darkTheme=void 0;const light_1=__webpack_require__("./node_modules/nano-theme/lib/themes/light.js"),g=(shade,opacity=1)=>{const g=255-Math.round(255*shade);return`rgba(${g},${g},${g},${opacity})`};exports.darkTheme=Object.assign(Object.assign({},light_1.lightTheme),{isLight:!1,name:"dark",bg:"#101921",color:Object.assign(Object.assign({},light_1.lightTheme.color),{ui:{lightLine:g(.1,.04),line:g(.1,.08),lineDark:g(.1,.16)}}),g})},"./node_modules/nano-theme/lib/types.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0})},"./node_modules/react-use/lib/misc/util.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.isNavigator=exports.isBrowser=exports.off=exports.on=exports.noop=void 0;exports.noop=function(){},exports.on=function on(obj){for(var args=[],_i=1;_i<arguments.length;_i++)args[_i-1]=arguments[_i];obj&&obj.addEventListener&&obj.addEventListener.apply(obj,args)},exports.off=function off(obj){for(var args=[],_i=1;_i<arguments.length;_i++)args[_i-1]=arguments[_i];obj&&obj.removeEventListener&&obj.removeEventListener.apply(obj,args)},exports.isBrowser="undefined"!=typeof window,exports.isNavigator="undefined"!=typeof navigator},"./node_modules/react-use/lib/useAsync.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";var tslib_1=__webpack_require__("./node_modules/tslib/tslib.es6.mjs"),react_1=__webpack_require__("./node_modules/react/index.js"),useAsyncFn_1=tslib_1.__importDefault(__webpack_require__("./node_modules/react-use/lib/useAsyncFn.js"));exports.Z=function useAsync(fn,deps){void 0===deps&&(deps=[]);var _a=useAsyncFn_1.default(fn,deps,{loading:!0}),state=_a[0],callback=_a[1];return react_1.useEffect((function(){callback()}),[callback]),state}},"./node_modules/react-use/lib/useAsyncFn.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var tslib_1=__webpack_require__("./node_modules/tslib/tslib.es6.mjs"),react_1=__webpack_require__("./node_modules/react/index.js"),useMountedState_1=tslib_1.__importDefault(__webpack_require__("./node_modules/react-use/lib/useMountedState.js"));exports.default=function useAsyncFn(fn,deps,initialState){void 0===deps&&(deps=[]),void 0===initialState&&(initialState={loading:!1});var lastCallId=react_1.useRef(0),isMounted=useMountedState_1.default(),_a=react_1.useState(initialState),state=_a[0],set=_a[1],callback=react_1.useCallback((function(){for(var args=[],_i=0;_i<arguments.length;_i++)args[_i]=arguments[_i];var callId=++lastCallId.current;return state.loading||set((function(prevState){return tslib_1.__assign(tslib_1.__assign({},prevState),{loading:!0})})),fn.apply(void 0,args).then((function(value){return isMounted()&&callId===lastCallId.current&&set({value,loading:!1}),value}),(function(error){return isMounted()&&callId===lastCallId.current&&set({error,loading:!1}),error}))}),deps);return[state,callback]}},"./node_modules/react-use/lib/useIsomorphicLayoutEffect.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var react_1=__webpack_require__("./node_modules/react/index.js"),useIsomorphicLayoutEffect=__webpack_require__("./node_modules/react-use/lib/misc/util.js").isBrowser?react_1.useLayoutEffect:react_1.useEffect;exports.default=useIsomorphicLayoutEffect},"./node_modules/react-use/lib/useMountedState.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var react_1=__webpack_require__("./node_modules/react/index.js");exports.default=function useMountedState(){var mountedRef=react_1.useRef(!1),get=react_1.useCallback((function(){return mountedRef.current}),[]);return react_1.useEffect((function(){return mountedRef.current=!0,function(){mountedRef.current=!1}}),[]),get}},"./node_modules/react/cjs/react-jsx-runtime.production.min.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";var f=__webpack_require__("./node_modules/react/index.js"),k=Symbol.for("react.element"),l=Symbol.for("react.fragment"),m=Object.prototype.hasOwnProperty,n=f.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p={key:!0,ref:!0,__self:!0,__source:!0};function q(c,a,g){var b,d={},e=null,h=null;for(b in void 0!==g&&(e=""+g),void 0!==a.key&&(e=""+a.key),void 0!==a.ref&&(h=a.ref),a)m.call(a,b)&&!p.hasOwnProperty(b)&&(d[b]=a[b]);if(c&&c.defaultProps)for(b in a=c.defaultProps)void 0===d[b]&&(d[b]=a[b]);return{$$typeof:k,type:c,key:e,ref:h,props:d,_owner:n.current}}exports.Fragment=l,exports.jsx=q,exports.jsxs=q},"./node_modules/react/jsx-runtime.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=__webpack_require__("./node_modules/react/cjs/react-jsx-runtime.production.min.js")},"./node_modules/thingies/es6/tick.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.tick=void 0;exports.tick=(ms=1)=>new Promise((r=>setTimeout(r,ms)))},"./node_modules/thingies/es6/until.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";exports.C=void 0;const tslib_1=__webpack_require__("./node_modules/tslib/tslib.es6.mjs"),tick_1=__webpack_require__("./node_modules/thingies/es6/tick.js");exports.C=(check,pollInterval=1)=>tslib_1.__awaiter(void 0,void 0,void 0,(function*(){for(;;){if(yield check())return;yield(0,tick_1.tick)(pollInterval)}}))},"./node_modules/thingies/lib/loadCss.js":(__unused_webpack_module,exports)=>{"use strict";exports.Y=void 0,exports.Y="object"!=typeof window?()=>{}:(href,id)=>{if(id){const link=document.getElementById(id);if(link)return link}const link=document.createElement("link");return id&&(link.id=id),link.rel="stylesheet",link.type="text/css",link.href=href,link.media="all",document.getElementsByTagName("head")[0].appendChild(link),link}}}]);